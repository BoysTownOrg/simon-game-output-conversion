classdef ExtractCompleteTaskResultsTestCase < matlab.unittest.TestCase
    methods (Test)
        function practiceTask(self)
            expected = "[{""rt"":7433,""response"":{""participant_id"":""23013""},""trial_type"":""survey-html-form"",""trial_index"":0,""time_elapsed"":7434,""internal_node_id"":""0.0-0.0""},{""rt"":17439,""stimulus"":""<p style=\""line-height:normal\"">You will see patterns of squares shown on the screen in different places, one at a time. After watching each pattern, you must correctly copy it by pressing the place where you saw it.</p><p style=\""line-height:normal\"">When you finish copying each pattern, press the \""Done\"" button and then the next pattern will be shown.</p><p style=\""line-height:normal\"">If you don't know or can't remember what a pattern was, just make your best guess. Once you make a response, you cannot go back and correct it, so take your time in choosing the correct colors.</p><p style=\""line-height:normal\"">There will be 4 practice trials.</p><p style=\""line-height:normal\"">When you are ready to begin, press the button below.</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":1,""time_elapsed"":24874,""internal_node_id"":""0.0-1.0""},{""correct"":true,""responses"":""[{\""milliseconds\"":32343.19999998808,\""id\"":4},{\""milliseconds\"":33183.39999997616,\""id\"":3},{\""milliseconds\"":33701.89999997616,\""id\"":3}]"",""simon"":""[{\""milliseconds\"":26072.69999998808,\""id\"":4},{\""milliseconds\"":27472.69999998808,\""id\"":3},{\""milliseconds\"":28872.69999998808,\""id\"":3}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":2,""time_elapsed"":34125,""internal_node_id"":""0.0-2.0-0.0""},{""rt"":931,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":3,""time_elapsed"":35058,""internal_node_id"":""0.0-2.0-1.0""},{""correct"":true,""responses"":""[{\""milliseconds\"":41271.89999997616,\""id\"":1},{\""milliseconds\"":41909.5,\""id\"":3},{\""milliseconds\"":42630.59999996424,\""id\"":4}]"",""simon"":""[{\""milliseconds\"":36022.5,\""id\"":1},{\""milliseconds\"":37422.69999998808,\""id\"":3},{\""milliseconds\"":38822.39999997616,\""id\"":4}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":4,""time_elapsed"":43093,""internal_node_id"":""0.0-2.0-0.1""},{""rt"":939,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":5,""time_elapsed"":44033,""internal_node_id"":""0.0-2.0-1.1""},{""correct"":true,""responses"":""[{\""milliseconds\"":50392.19999998808,\""id\"":2},{\""milliseconds\"":50837.89999997616,\""id\"":2},{\""milliseconds\"":51335.69999998808,\""id\"":4}]"",""simon"":""[{\""milliseconds\"":45001.69999998808,\""id\"":2},{\""milliseconds\"":46400.19999998808,\""id\"":2},{\""milliseconds\"":47802.5,\""id\"":4}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":6,""time_elapsed"":51461,""internal_node_id"":""0.0-2.0-0.2""},{""rt"":1091,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":7,""time_elapsed"":52554,""internal_node_id"":""0.0-2.0-1.2""},{""correct"":true,""responses"":""[{\""milliseconds\"":58512.09999996424,\""id\"":1},{\""milliseconds\"":58927.5,\""id\"":3},{\""milliseconds\"":59397.89999997616,\""id\"":2}]"",""simon"":""[{\""milliseconds\"":53520.30000001192,\""id\"":1},{\""milliseconds\"":54922.69999998808,\""id\"":3},{\""milliseconds\"":56313.09999996424,\""id\"":2}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":8,""time_elapsed"":59500,""internal_node_id"":""0.0-2.0-0.3""},{""rt"":638,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":9,""time_elapsed"":60139,""internal_node_id"":""0.0-2.0-1.3""},{""rt"":895,""stimulus"":""<p style=\""line-height:normal\"">Practice complete.</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":10,""time_elapsed"":61034,""internal_node_id"":""0.0-3.0""}]";
            self.assertEqual(extractCompleteTaskResults("{""rt"":7433,""response"":{""participant_id"":""23013""},""trial_type"":""survey-html-form"",""trial_index"":0,""time_elapsed"":7434,""internal_node_id"":""0.0-0.0""}{""rt"":17439,""stimulus"":""<p style=\""line-height:normal\"">You will see patterns of squares shown on the screen in different places, one at a time. After watching each pattern, you must correctly copy it by pressing the place where you saw it.</p><p style=\""line-height:normal\"">When you finish copying each pattern, press the \""Done\"" button and then the next pattern will be shown.</p><p style=\""line-height:normal\"">If you don't know or can't remember what a pattern was, just make your best guess. Once you make a response, you cannot go back and correct it, so take your time in choosing the correct colors.</p><p style=\""line-height:normal\"">There will be 4 practice trials.</p><p style=\""line-height:normal\"">When you are ready to begin, press the button below.</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":1,""time_elapsed"":24874,""internal_node_id"":""0.0-1.0""}{""correct"":true,""responses"":""[{\""milliseconds\"":32343.19999998808,\""id\"":4},{\""milliseconds\"":33183.39999997616,\""id\"":3},{\""milliseconds\"":33701.89999997616,\""id\"":3}]"",""simon"":""[{\""milliseconds\"":26072.69999998808,\""id\"":4},{\""milliseconds\"":27472.69999998808,\""id\"":3},{\""milliseconds\"":28872.69999998808,\""id\"":3}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":2,""time_elapsed"":34125,""internal_node_id"":""0.0-2.0-0.0""}{""rt"":931,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":3,""time_elapsed"":35058,""internal_node_id"":""0.0-2.0-1.0""}{""correct"":true,""responses"":""[{\""milliseconds\"":41271.89999997616,\""id\"":1},{\""milliseconds\"":41909.5,\""id\"":3},{\""milliseconds\"":42630.59999996424,\""id\"":4}]"",""simon"":""[{\""milliseconds\"":36022.5,\""id\"":1},{\""milliseconds\"":37422.69999998808,\""id\"":3},{\""milliseconds\"":38822.39999997616,\""id\"":4}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":4,""time_elapsed"":43093,""internal_node_id"":""0.0-2.0-0.1""}{""rt"":939,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":5,""time_elapsed"":44033,""internal_node_id"":""0.0-2.0-1.1""}{""correct"":true,""responses"":""[{\""milliseconds\"":50392.19999998808,\""id\"":2},{\""milliseconds\"":50837.89999997616,\""id\"":2},{\""milliseconds\"":51335.69999998808,\""id\"":4}]"",""simon"":""[{\""milliseconds\"":45001.69999998808,\""id\"":2},{\""milliseconds\"":46400.19999998808,\""id\"":2},{\""milliseconds\"":47802.5,\""id\"":4}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":6,""time_elapsed"":51461,""internal_node_id"":""0.0-2.0-0.2""}{""rt"":1091,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":7,""time_elapsed"":52554,""internal_node_id"":""0.0-2.0-1.2""}{""correct"":true,""responses"":""[{\""milliseconds\"":58512.09999996424,\""id\"":1},{\""milliseconds\"":58927.5,\""id\"":3},{\""milliseconds\"":59397.89999997616,\""id\"":2}]"",""simon"":""[{\""milliseconds\"":53520.30000001192,\""id\"":1},{\""milliseconds\"":54922.69999998808,\""id\"":3},{\""milliseconds\"":56313.09999996424,\""id\"":2}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":8,""time_elapsed"":59500,""internal_node_id"":""0.0-2.0-0.3""}{""rt"":638,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":9,""time_elapsed"":60139,""internal_node_id"":""0.0-2.0-1.3""}{""rt"":895,""stimulus"":""<p style=\""line-height:normal\"">Practice complete.</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":10,""time_elapsed"":61034,""internal_node_id"":""0.0-3.0""}[{""rt"":7433,""response"":{""participant_id"":""23013""},""trial_type"":""survey-html-form"",""trial_index"":0,""time_elapsed"":7434,""internal_node_id"":""0.0-0.0""},{""rt"":17439,""stimulus"":""<p style=\""line-height:normal\"">You will see patterns of squares shown on the screen in different places, one at a time. After watching each pattern, you must correctly copy it by pressing the place where you saw it.</p><p style=\""line-height:normal\"">When you finish copying each pattern, press the \""Done\"" button and then the next pattern will be shown.</p><p style=\""line-height:normal\"">If you don't know or can't remember what a pattern was, just make your best guess. Once you make a response, you cannot go back and correct it, so take your time in choosing the correct colors.</p><p style=\""line-height:normal\"">There will be 4 practice trials.</p><p style=\""line-height:normal\"">When you are ready to begin, press the button below.</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":1,""time_elapsed"":24874,""internal_node_id"":""0.0-1.0""},{""correct"":true,""responses"":""[{\""milliseconds\"":32343.19999998808,\""id\"":4},{\""milliseconds\"":33183.39999997616,\""id\"":3},{\""milliseconds\"":33701.89999997616,\""id\"":3}]"",""simon"":""[{\""milliseconds\"":26072.69999998808,\""id\"":4},{\""milliseconds\"":27472.69999998808,\""id\"":3},{\""milliseconds\"":28872.69999998808,\""id\"":3}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":2,""time_elapsed"":34125,""internal_node_id"":""0.0-2.0-0.0""},{""rt"":931,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":3,""time_elapsed"":35058,""internal_node_id"":""0.0-2.0-1.0""},{""correct"":true,""responses"":""[{\""milliseconds\"":41271.89999997616,\""id\"":1},{\""milliseconds\"":41909.5,\""id\"":3},{\""milliseconds\"":42630.59999996424,\""id\"":4}]"",""simon"":""[{\""milliseconds\"":36022.5,\""id\"":1},{\""milliseconds\"":37422.69999998808,\""id\"":3},{\""milliseconds\"":38822.39999997616,\""id\"":4}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":4,""time_elapsed"":43093,""internal_node_id"":""0.0-2.0-0.1""},{""rt"":939,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":5,""time_elapsed"":44033,""internal_node_id"":""0.0-2.0-1.1""},{""correct"":true,""responses"":""[{\""milliseconds\"":50392.19999998808,\""id\"":2},{\""milliseconds\"":50837.89999997616,\""id\"":2},{\""milliseconds\"":51335.69999998808,\""id\"":4}]"",""simon"":""[{\""milliseconds\"":45001.69999998808,\""id\"":2},{\""milliseconds\"":46400.19999998808,\""id\"":2},{\""milliseconds\"":47802.5,\""id\"":4}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":6,""time_elapsed"":51461,""internal_node_id"":""0.0-2.0-0.2""},{""rt"":1091,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":7,""time_elapsed"":52554,""internal_node_id"":""0.0-2.0-1.2""},{""correct"":true,""responses"":""[{\""milliseconds\"":58512.09999996424,\""id\"":1},{\""milliseconds\"":58927.5,\""id\"":3},{\""milliseconds\"":59397.89999997616,\""id\"":2}]"",""simon"":""[{\""milliseconds\"":53520.30000001192,\""id\"":1},{\""milliseconds\"":54922.69999998808,\""id\"":3},{\""milliseconds\"":56313.09999996424,\""id\"":2}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":8,""time_elapsed"":59500,""internal_node_id"":""0.0-2.0-0.3""},{""rt"":638,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":9,""time_elapsed"":60139,""internal_node_id"":""0.0-2.0-1.3""},{""rt"":895,""stimulus"":""<p style=\""line-height:normal\"">Practice complete.</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":10,""time_elapsed"":61034,""internal_node_id"":""0.0-3.0""}]"), expected);
        end

        function identical(self)
            expected = "[{""rt"":7433,""response"":{""participant_id"":""23013""},""trial_type"":""survey-html-form"",""trial_index"":0,""time_elapsed"":7434,""internal_node_id"":""0.0-0.0""},{""rt"":17439,""stimulus"":""<p style=\""line-height:normal\"">You will see patterns of squares shown on the screen in different places, one at a time. After watching each pattern, you must correctly copy it by pressing the place where you saw it.</p><p style=\""line-height:normal\"">When you finish copying each pattern, press the \""Done\"" button and then the next pattern will be shown.</p><p style=\""line-height:normal\"">If you don't know or can't remember what a pattern was, just make your best guess. Once you make a response, you cannot go back and correct it, so take your time in choosing the correct colors.</p><p style=\""line-height:normal\"">There will be 4 practice trials.</p><p style=\""line-height:normal\"">When you are ready to begin, press the button below.</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":1,""time_elapsed"":24874,""internal_node_id"":""0.0-1.0""},{""correct"":true,""responses"":""[{\""milliseconds\"":32343.19999998808,\""id\"":4},{\""milliseconds\"":33183.39999997616,\""id\"":3},{\""milliseconds\"":33701.89999997616,\""id\"":3}]"",""simon"":""[{\""milliseconds\"":26072.69999998808,\""id\"":4},{\""milliseconds\"":27472.69999998808,\""id\"":3},{\""milliseconds\"":28872.69999998808,\""id\"":3}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":2,""time_elapsed"":34125,""internal_node_id"":""0.0-2.0-0.0""},{""rt"":931,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":3,""time_elapsed"":35058,""internal_node_id"":""0.0-2.0-1.0""},{""correct"":true,""responses"":""[{\""milliseconds\"":41271.89999997616,\""id\"":1},{\""milliseconds\"":41909.5,\""id\"":3},{\""milliseconds\"":42630.59999996424,\""id\"":4}]"",""simon"":""[{\""milliseconds\"":36022.5,\""id\"":1},{\""milliseconds\"":37422.69999998808,\""id\"":3},{\""milliseconds\"":38822.39999997616,\""id\"":4}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":4,""time_elapsed"":43093,""internal_node_id"":""0.0-2.0-0.1""},{""rt"":939,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":5,""time_elapsed"":44033,""internal_node_id"":""0.0-2.0-1.1""},{""correct"":true,""responses"":""[{\""milliseconds\"":50392.19999998808,\""id\"":2},{\""milliseconds\"":50837.89999997616,\""id\"":2},{\""milliseconds\"":51335.69999998808,\""id\"":4}]"",""simon"":""[{\""milliseconds\"":45001.69999998808,\""id\"":2},{\""milliseconds\"":46400.19999998808,\""id\"":2},{\""milliseconds\"":47802.5,\""id\"":4}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":6,""time_elapsed"":51461,""internal_node_id"":""0.0-2.0-0.2""},{""rt"":1091,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":7,""time_elapsed"":52554,""internal_node_id"":""0.0-2.0-1.2""},{""correct"":true,""responses"":""[{\""milliseconds\"":58512.09999996424,\""id\"":1},{\""milliseconds\"":58927.5,\""id\"":3},{\""milliseconds\"":59397.89999997616,\""id\"":2}]"",""simon"":""[{\""milliseconds\"":53520.30000001192,\""id\"":1},{\""milliseconds\"":54922.69999998808,\""id\"":3},{\""milliseconds\"":56313.09999996424,\""id\"":2}]"",""response_key"":""{\""top_left\"":1,\""top_right\"":3,\""bottom_left\"":2,\""bottom_right\"":4}"",""trial_index"":8,""time_elapsed"":59500,""internal_node_id"":""0.0-2.0-0.3""},{""rt"":638,""stimulus"":""<p style=\""line-height:normal\"">Good job!</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":9,""time_elapsed"":60139,""internal_node_id"":""0.0-2.0-1.3""},{""rt"":895,""stimulus"":""<p style=\""line-height:normal\"">Practice complete.</p>"",""response"":0,""trial_type"":""html-button-response"",""trial_index"":10,""time_elapsed"":61034,""internal_node_id"":""0.0-3.0""}]";
            self.assertEqual(extractCompleteTaskResults(expected), expected);
        end

        function missing(self)
            self.assertEqual(extractCompleteTaskResults("{""rt"":5532,""response"":{""participant_id"":""2305""},""trial_type"":""survey-html-form"",""trial_index"":0,""time_elapsed"":5534,""internal_node_id"":""0.0-0.0""}"), "[]");
        end
    end
end